{% extends 'healthapp/base.html' %}
{% block container_class %}{% endblock %}
{% block content %}
<div class="fixed inset-0 -z-10 h-full w-full bg-[#070707]">
    <!-- Background Glows -->
    <div
        class="absolute top-1/2 left-[20%] -translate-y-1/2 w-[400px] h-[400px] bg-emerald-600/20 rounded-full blur-[120px]">
    </div>
    <div
        class="absolute top-1/2 right-[20%] -translate-y-1/2 w-[400px] h-[400px] bg-purple-600/20 rounded-full blur-[120px]">
    </div>
</div>

<!-- Header / Navbar -->
<nav class="sticky top-0 z-50 bg-[#070707]/80 backdrop-blur-md border-b border-white/5 px-8 py-5">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
        <h1 class="text-2xl font-bold text-emerald-400 tracking-tight">Smart Health</h1>
        <a href="{% url 'logout' %}"
            class="text-sm font-semibold text-emerald-400 hover:text-emerald-300 transition-colors">Logout</a>
    </div>
</nav>

<div class="max-w-6xl mx-auto px-4 py-16">
    <!-- Main Dashboard Card -->
    <div class="bg-[#121212]/80 backdrop-blur-2xl rounded-[48px] border border-white/5 shadow-2xl p-10 md:p-16">
        <div class="text-center mb-16">
            <div class="inline-block mb-6 p-4 bg-white/5 rounded-2xl border border-white/10 text-emerald-400">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <line x1="3" y1="9" x2="21" y2="9" />
                    <line x1="9" y1="21" x2="9" y2="9" />
                </svg>
            </div>
            <h2 class="text-4xl font-bold text-white tracking-tight">Welcome, {{ user.username }} ðŸ‘‹</h2>
            <p class="mt-3 text-lg text-gray-400">Your personal health dashboard</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 mt-10">
            <!-- BMI Calculator Card -->
            <div
                class="relative group p-10 bg-[#161616]/50 rounded-[32px] border border-white/5 hover:border-emerald-500/20 transition-all flex flex-col items-center">
                <h3 class="text-xl font-bold text-white mb-8 flex items-center">
                    <span class="mr-3 p-2 bg-emerald-500/10 rounded-lg">ðŸ§®</span> BMI Calculator
                </h3>

                <form method="POST" class="w-full space-y-5 relative z-10">
                    {% csrf_token %}
                    <div class="space-y-2">
                        <label class="text-xs font-semibold text-gray-400 ml-1">Height (cm)</label>
                        <input type="number" step="0.1" name="height" required
                            class="block w-full px-5 py-4 text-white bg-white/5 border border-white/10 rounded-2xl focus:ring-1 focus:ring-emerald-500/50 outline-none transition-all placeholder-gray-600"
                            placeholder="e.g. 175">
                    </div>

                    <div class="space-y-2">
                        <label class="text-xs font-semibold text-gray-400 ml-1">Weight (kg)</label>
                        <input type="number" step="0.1" name="weight" required
                            class="block w-full px-5 py-4 text-white bg-white/5 border border-white/10 rounded-2xl focus:ring-1 focus:ring-emerald-500/50 outline-none transition-all placeholder-gray-600"
                            placeholder="e.g. 70">
                    </div>

                    <button type="submit"
                        class="w-full py-4 text-sm font-bold text-black bg-white rounded-2xl hover:bg-gray-200 focus:outline-none transition-all transform active:scale-[0.98]">
                        Calculate BMI
                    </button>
                </form>

                {% if bmi %}
                <div
                    class="mt-8 p-6 w-full bg-emerald-500/5 rounded-2xl border border-emerald-500/10 text-center animate-in fade-in zoom-in duration-500">
                    <p class="text-2xl font-bold text-emerald-400">{{ bmi }}</p>
                    <p class="text-sm text-gray-300 font-medium">Status: {{ status }}</p>
                </div>
                {% endif %}

                {% for msg in messages %}
                {% if 'bmi' in msg.tags %}
                <p class="mt-4 text-sm font-medium text-emerald-400">{{ msg }}</p>
                {% endif %}
                {% endfor %}
            </div>

            <!-- Health Analyzer Card -->
            <div
                class="relative group p-10 bg-[#161616]/50 rounded-[32px] border border-white/5 hover:border-emerald-500/20 transition-all flex flex-col items-center justify-between text-center">
                <div class="w-full">
                    <h3 class="text-xl font-bold text-white mb-8 flex items-center justify-center">
                        <span class="mr-3 p-2 bg-emerald-500/10 rounded-lg">ðŸ©º</span> Health Analyzer
                    </h3>
                    <p class="text-gray-400 text-base leading-relaxed mb-12">
                        Get deep insights into your health status using our advanced AI analyzer.
                        Receive personalized tips and recommendations.
                    </p>
                </div>

                <a href="{% url 'health_profile' %}" class="w-full relative z-10">
                    <button
                        class="w-full py-4 text-sm font-bold text-black bg-white rounded-2xl hover:bg-gray-200 focus:outline-none transition-all transform active:scale-[0.98]">
                        Analyze My Health
                    </button>
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}